package org.netcomputing.webservices.server;

import com.mongodb.DB;
import com.mongodb.MongoClient;

public class MongoDB {
	 
	 private static MongoDB mDbSingleton;
	  
	 private static MongoClient mongoClient;
	     
	 private static DB db ;
	  
	  
	 private static final String dbHost = "dbHost here";
	 private static final int dbPort = 27017;
	 private static final String dbName = "dbName here";
	 private static final String dbUser = "dbUser here";
	 private static final String dbPassword = "dbPassword here";
	 
	 private MongoDB(){};
	  
	 public static MongoDB getInstance(){
	  if(mDbSingleton == null){
	   mDbSingleton = new MongoDB();
	  }
	  return mDbSingleton;
	 } 
	  
	 public DB getTestdb(){
	  if(mongoClient == null){
	   try {
	    mongoClient = new MongoClient(dbHost , dbPort);
	   } catch (UnknownHostException e) {
	    return null;
	   }
	  }
	  if(db == null)
	   db = mongoClient.getDB(dbName);
	  if(!db.isAuthenticated()){
	   boolean auth = db.authenticate(dbUser, dbPassword.toCharArray());
	  }
	  return db;
	 }
	}
