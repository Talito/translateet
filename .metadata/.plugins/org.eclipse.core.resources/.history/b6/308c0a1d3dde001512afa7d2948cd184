package org.netcomputing.webservices.server;

import java.net.UnknownHostException;

import com.mongodb.DB;
import com.mongodb.MongoClient;

public enum MongoDB {
	 
	/**
	 * The unique instance of MongoDB
	 */
	instance;
	     
	 private static DB db ;
	 private static MongoClient mongoClient;
	 
	 /* Values to configure the database */
	 private static final String dbHost = "dbHost here";
	 private static final int dbPort = 27017;
	 private static final String dbName = "dbName here";
	 private static final String dbUser = "dbUser here";
	 private static final String dbPassword = "dbPassword here";
	 
	 private MongoDB(){
		 // initializing some connection?
	 }
	 
	 public DB getDB() {
		 if (mongoClient == null) {
			 try {
				 mongoClient = new MongoClient(dbHost, dbPort);
			 } catch (UnknownHostException e) {
				 System.out.println("Error. Impossible to create MongoClient; track: " + e);
				 return null;
			 }
		 }
		 if (db == null) {
			 db = mongoClient.getDB(dbName);
			 if (!db.isAuthenticated()) {
				 boolean auth = db.authenticate(dbUser,  dbPassword.toCharArray());
			 }
			 return db;
		 } else {
			 return db;
		 }
	 }

}
