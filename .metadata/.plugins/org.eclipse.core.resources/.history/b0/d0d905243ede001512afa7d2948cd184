package org.netcomputing.webservices.server;

import java.net.UnknownHostException;

import com.mongodb.DB;
import com.mongodb.MongoClient;

public enum MongoDB {
	 
	/**
	 * The unique instance of MongoDB
	 */
	instance;
	     
	/**
	 * The abstraction of a (concrete) database
	 */
	private static DB db ;
	
	/**
	 * The mongoClient that manages the operations on the database
	 */
	private static MongoClient mongoClient;
	 
	/* Values to configure the database */
	private static final String dbHost = "localhost";
	private static final int dbPort = 27017; // commonly used port
	private static final String dbName = "translateet";
	private static final String dbUser = "admin";
	private static final String dbPassword = "admin";
	 
	private MongoDB(){
		// initializing some connection?
	}
	 
	public DB getDB() {
		if (mongoClient == null) {
			try {
				mongoClient = new MongoClient(dbHost, dbPort);
			} catch (UnknownHostException e) {
				System.out.println("Error. Impossible to create MongoClient; track: " + e);
			return null;
			}
		}
		if (db == null) {
			db = mongoClient.getDB(dbName);
		if (!db.isAuthenticated()) {
			boolean auth = db.authenticate(dbUser,  dbPassword.toCharArray());
		}
			return db;
		} else {
			return db;
		}
	}

}
